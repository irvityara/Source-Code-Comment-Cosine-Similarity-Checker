<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Text Similarity Checker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f0f2f5;
        padding-top: 40px;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      .container {
        max-width: 700px;
        margin-bottom: 50px; /* Jarak ke footer */
      }

      textarea {
        resize: vertical;
      }
      .fade-in {
        animation: fadeIn 0.4s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      footer {
        margin-top: auto;
        background-color: #343a40;
        color: #fff;
        padding: 20px 0;
      }
      footer .container {
        text-align: center;
        font-size: 14px;
        line-height: 1.6;
      }
    </style>
  </head>
  <body>
    <div class="container bg-white p-5 rounded shadow">
      <h2 class="mb-4 text-center text-primary">
        <i class="bi bi-diagram-3-fill"></i> Cosine Text Similarity Calculator
      </h2>

      <div class="mb-3">
        <label for="text1" class="form-label">Komentar Asli:</label>
        <textarea
          class="form-control"
          id="text1"
          rows="4"
          placeholder="Masukkan teks pertama..."
        ></textarea>
      </div>

      <div class="mb-3">
        <label for="text2" class="form-label">Komentar AI:</label>
        <textarea
          class="form-control"
          id="text2"
          rows="4"
          placeholder="Masukkan teks kedua..."
        ></textarea>
      </div>

      <div class="d-grid">
        <button class="btn btn-success" onclick="calculateSimilarity()">
          <i class="bi bi-calculator-fill"></i> Hitung Similarity
        </button>
      </div>

      <div
        id="result"
        class="alert alert-info mt-4 fade-in"
        style="display: none"
      >
        Hasil kemiripan akan muncul di sini...
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <div class="container">
        <strong>IRVIANTI DWITYARA SANY</strong><br />
        L200210251<br />
        <br />
        <em
          >Evaluasi Semantik Komentar Kode oleh Model LLM: Studi Komparatif
          ChatGPT, Gemini, dan DeepSeek Menggunakan Text Similarity</em
        ><br />
        <br />
        <hr />
        Universitas Muhammadiyah Surakarta<br />
        Fakultas Komunikasi dan Informatika, 2025
      </div>
    </footer>

    <script>
      function getTermFrequencyMap(str) {
        const words = str.toLowerCase().match(/\w+/g) || [];
        const freqMap = {};
        words.forEach((word) => {
          freqMap[word] = (freqMap[word] || 0) + 1;
        });
        return freqMap;
      }

      function cosineSimilarity(mapA, mapB) {
        const allWords = new Set([...Object.keys(mapA), ...Object.keys(mapB)]);
        let dotProduct = 0;
        let magnitudeA = 0;
        let magnitudeB = 0;

        allWords.forEach((word) => {
          const a = mapA[word] || 0;
          const b = mapB[word] || 0;
          dotProduct += a * b;
          magnitudeA += a * a;
          magnitudeB += b * b;
        });

        if (magnitudeA === 0 || magnitudeB === 0) return 0;
        return dotProduct / (Math.sqrt(magnitudeA) * Math.sqrt(magnitudeB));
      }

      function calculateSimilarity() {
        const text1 = document.getElementById("text1").value.trim();
        const text2 = document.getElementById("text2").value.trim();

        const tf1 = getTermFrequencyMap(text1);
        const tf2 = getTermFrequencyMap(text2);

        const similarity = cosineSimilarity(tf1, tf2);
        const percentage = (similarity * 100).toFixed(2);

        const resultBox = document.getElementById("result");
        resultBox.innerText = `Cosine Similarity: ${percentage}%`;
        resultBox.style.display = "block";
      }
    </script>
  </body>
</html>
